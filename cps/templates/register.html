{% extends "layout.html" %}
{% block body %}
<div class="well col-sm-6 col-sm-offset-2">
  <h2 style="margin-top: 0">{{_('Register a new account')}}</h2>
  <form method="POST" role="form">
    <div class="form-group required">
      <label for="nickname">{{_('Username')}}</label>
      <input type="text" class="form-control" id="nickname" name="nickname" placeholder="{{_('Choose a username')}}" required>
    </div>
    <div class="form-group required">
      <label for="email">{{_('E-mail address')}}</label>
      <input type="email" class="form-control" id="email" name="email" placeholder="{{_('Your email address')}}" required>
    </div>
    <button type="submit" id="submit" class="btn btn-primary">{{_('Register')}}</button>
  </form>
</div>
  {% if error %}
  <div class="col-sm-6 col-sm-offset-2">
    <div class="alert alert-danger">{{error}}</div>
  </div>
  {% endif %}
    <script type="text/javascript">
        function GetQueryString(name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
            var r = window.location.search.substr(1).match(reg);
            if (r != null) return decodeURI(r[2]);
            return null;
        }

        var email = GetQueryString("new_email");
        if (email != null) {
            var input = document.getElementById("email");
            input.value = email;
            input.readOnly = true;
        }
    </script>
{% endblock %}
